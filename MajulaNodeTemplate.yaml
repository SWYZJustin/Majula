# Majula 节点配置模板
node_id: "node1"
token: "default_token"

# 信令服务器配置（可选）
signaling_server:
  enabled: false  # 是否启用信令服务器连接
  url: "ws://localhost:8080/ws"  # 信令服务器WebSocket地址
  udp_port: 8081  # 信令服务器UDP端口
  reconnect_interval: "30s"  # 重连间隔
  heartbeat_interval: "30s"  # 心跳间隔

majula_servers:
  - port: 18080

channels:
  - type: "server"
    protocol: "tcp"
    listen_addr: "127.0.0.1:29090"
    tcp:
      frame_size: 4096
      inactive_seconds: 10
      send_queue_size: 1000
      max_connections_per_sec: 5
      # ip_whitelist: ["127.0.0.1", "192.168.1.0/24"]  # 可选，限制允许连接的IP
      # tls:
      #   cert_file: "tcp_server.crt"  # 可选，启用TLS时填写证书路径
      #   key_file: "tcp_server.key"    # 可选，启用TLS时填写密钥路径
  - type: "server"
    protocol: "kcp"
    listen_addr: "127.0.0.1:30090"
    kcp:
      frame_size: 4096
      inactive_seconds: 10
      send_queue_size: 1000
      max_connections_per_sec: 5
      # ip_whitelist: ["127.0.0.1", "192.168.1.0/24"]  # 可选，限制允许连接的IP
# - type: "client"
#   protocol: "tcp"
#   remote_addr: "192.168.1.2:29090"
#   peer_id: "serverNode"
#   tcp:
#     frame_size: 4096
#     inactive_seconds: 10
#     send_queue_size: 1000
#     max_connections_per_sec: 5

raft:
  - group: "raft-group-1"
    peers:
      - "node1"
      - "node2"
      - "node3"
    dbpath: "./raftdb_group1_node1"
  - group: "raft-group-2"
    peers:
      - "node1"
      - "node4"
      - "node5"
    dbpath: "./raftdb_group2_node1"
